#:kivy 2.2.0

<MainLayout>:
    orientation: "vertical"
    padding: 20
    spacing: 12

    canvas.before:
        Color:
            rgba: 0.97, 0.97, 0.99, 1
        Rectangle:
            pos: self.pos
            size: self.size

    # ÜST BAŞLIK BÖLÜMÜ
    BoxLayout:
        size_hint_y: 0.13
        orientation: "vertical"
        spacing: 4

        Label:
            text: "Kivy Dokunmatik Çizim Uygulaması"
            font_size: 26
            bold: True
            color: 0.08, 0.08, 0.12, 1

        Label:
            text: root.info_text
            font_size: 14
            color: 0.35, 0.35, 0.4, 1

    # ÇİZİM ALANI
    DrawingArea:
        id: cizim_alani
        line_color: root.current_color
        line_width: root.brush_width
        size_hint_y: 0.6

    # RENK SEÇİMİ + SEÇİLİ RENK GÖSTERGESİ
    BoxLayout:
        size_hint_y: 0.16
        spacing: 10

        BoxLayout:
            orientation: "vertical"
            size_hint_x: 0.75
            spacing: 6

            BoxLayout:
                size_hint_y: 0.35
                spacing: 6

                Label:
                    text: "Renk:"
                    size_hint_x: 0.18
                    color: 0.2, 0.2, 0.25, 1

                Button:
                    text: "Siyah"
                    background_normal: ""
                    background_color: 0.1, 0.1, 0.1, 1
                    on_release: root.set_color(0, 0, 0, 1)

                Button:
                    text: "Kırmızı"
                    background_normal: ""
                    background_color: 0.9, 0.1, 0.1, 1
                    on_release: root.set_color(0.9, 0.1, 0.1, 1)

                Button:
                    text: "Mavi"
                    background_normal: ""
                    background_color: 0.1, 0.3, 0.9, 1
                    on_release: root.set_color(0.1, 0.3, 0.9, 1)

                Button:
                    text: "Yeşil"
                    background_normal: ""
                    background_color: 0.1, 0.6, 0.2, 1
                    on_release: root.set_color(0.1, 0.6, 0.2, 1)

            # Fırça kalınlığı slider'ını buraya alıyoruz
            BoxLayout:
                size_hint_y: 0.65
                orientation: "vertical"
                spacing: 4

                BoxLayout:
                    size_hint_y: 0.45
                    spacing: 8
                    Label:
                        text: "Fırça kalınlığı: " + str(int(root.brush_width))
                        size_hint_x: 0.3
                        color: 0.2, 0.2, 0.25, 1
                    Slider:
                        min: 1
                        max: 15
                        value: root.brush_width
                        on_value: root.update_brush_width(self.value)

        # Seçili renk kutusu
        BoxLayout:
            orientation: "vertical"
            size_hint_x: 0.25
            spacing: 4

            Label:
                text: "Seçili renk"
                font_size: 14
                color: 0.2, 0.2, 0.25, 1
                size_hint_y: 0.3

            Widget:
                size_hint_y: 0.7
                canvas.before:
                    Color:
                        rgba: 1, 1, 1, 1
                    RoundedRectangle:
                        radius: [10, 10, 10, 10]
                        pos: self.pos
                        size: self.size
                    Color:
                        rgba: root.current_color
                    RoundedRectangle:
                        radius: [8, 8, 8, 8]
                        pos: self.x + 4, self.y + 4
                        size: self.width - 8, self.height - 8

    # ALTTA TEMİZLE BUTONU
    BoxLayout:
        size_hint_y: 0.11
        padding: 0, 4
        Button:
            text: "Temizle"
            font_size: 18
            background_normal: ""
            background_color: 0.85, 0.2, 0.2, 1
            on_release: root.clear_canvas()


<DrawingArea>:
    # Python tarafında arka plan zaten beyaz ayarlandı
